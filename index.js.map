{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/config/iziToast.js","../src/js/pixabay-api.js","../src/js/simlpeLightbox.js","../src/js/render-functions.js","../src/js/constants.js","../src/js/handlers.js","../src/main.js"],"sourcesContent":["export const refs = {\n  form: document.querySelector('.form'),\n  gallery: document.querySelector('.js-gallery'),\n  loader: document.querySelector('.js-loader'),\n  searchBtn: document.querySelector('.js-search-btn'),\n  loadMoreBtn: document.querySelector('.js-laod-more-btn'),\n  scrollToTopBtn: document.querySelector('.js-scroll-to-top-btn'),\n};\n","import iziToast from 'izitoast';\n\nconst isLocalhost =\n  window.location.origin.includes('localhost') ||\n  window.location.origin.includes('127.0.0.1');\n\niziToast.settings({\n  timeout: 3000,\n  transitionIn: 'flipInX',\n  transitionOut: 'flipOutX',\n\n  iconColor: '#FFF',\n  color: '#FFF',\n\n  close: true,\n  position: 'topRight',\n\n  messageColor: '#FFF',\n  messageSize: '16px',\n\n  progressBar: true,\n\n  progressBarEasing: 'linear',\n\n  message: 'Sorry, something went wrong.',\n\n  iconUrl: isLocalhost\n    ? './public/img/illegal.svg'\n    : '/goit-advancedjs-hw-03/img/illegal.svg',\n\n  progressBarColor: '#B51B1B',\n  backgroundColor: '#EF4040',\n\n  maxWidth: '432px',\n});\n\nexport { iziToast };\n","import axios from 'axios';\n\nconst API_KEY = '40358053-aa77a52d7b78d629a29aff12d';\nconst BASE_URL = 'https://pixabay.com/api';\n\naxios.defaults.baseURL = BASE_URL;\naxios.defaults.params = {\n  key: API_KEY,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: 'true',\n};\n\nexport const getImages = async fetchOptions => {\n  const params = {\n    q: fetchOptions.query,\n    page: fetchOptions.page,\n    per_page: fetchOptions.perPage,\n  };\n\n  const { data } = await axios.get('/', { params });\n\n  return data;\n};\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n","import { refs } from './refs';\nimport { lightbox } from './simlpeLightbox';\n\nexport const renderGallery = images => {\n  const itemMarkup = ({\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  }) => `\n      <li class=\"card card-set-item\">\n            <a href=\"${largeImageURL}\" class=\"gallery-link\" href=\"#\">\n              <div class=\"photo-box\">\n                <img\n                  src=\"${webformatURL}\"\n                  alt=\"${tags}\"\n                  class=\"photo\"\n                />\n              </div>\n              <div class=\"capture\">\n                <div class=\"item\"><span class=\"accent\">Likes</span>${likes}</div>\n                <div class=\"item\"><span class=\"accent\">Views</span>${views}</div>\n                <div class=\"item\"><span class=\"accent\">Comments</span>${comments}</div>\n                <div class=\"item\">\n                  <span class=\"accent\">Downloads</span>${downloads}\n                </div>\n              </div>\n            </a>\n          </li>\n      `;\n  const galleryMarkup = images.map(image => itemMarkup(image)).join('');\n\n  refs.gallery.insertAdjacentHTML('beforeend', galleryMarkup);\n\n  lightbox.refresh();\n};\n","export const fetchOptions = {\n  page: 1,\n  perPage: 15,\n  query: '',\n};\n\nexport const scrollConfig = {\n  scrollYAmount: 0,\n};\n\nexport const SCROLL_MULTIPLIER = 2;\n","import { refs } from './refs';\n\nimport { iziToast } from './config/iziToast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImages } from './pixabay-api';\nimport { renderGallery } from './render-functions';\nimport { fetchOptions, SCROLL_MULTIPLIER, scrollConfig } from './constants';\n\nexport const handleImagesSearch = e => {\n  e.preventDefault();\n  refs.gallery.innerHTML = '';\n\n  const input = refs.form.elements.search;\n\n  const query = input.value.trim();\n\n  if (query === '') {\n    iziToast.show({\n      message: 'Oops! Looks like you forgot to enter something.',\n    });\n    input.value = '';\n    return;\n  }\n\n  refs.loadMoreBtn.classList.add('visually-hidden');\n  refs.loader.classList.remove('hidden');\n\n  refs.searchBtn.disabled = true;\n\n  input.value = '';\n\n  fetchOptions.query = query;\n  fetchOptions.page = 1;\n\n  getImages(fetchOptions)\n    .then(data => {\n      if (data.hits.length === 0) {\n        iziToast.show({\n          message: `Sorry, there are no images matching your search query. Please try again!`,\n        });\n      }\n\n      renderGallery(data.hits);\n\n      const card = document.querySelector('.card');\n      const cardHeight = Math.ceil(card.getBoundingClientRect().height);\n      scrollConfig.scrollY = cardHeight * SCROLL_MULTIPLIER;\n\n      const hasNextPage =\n        fetchOptions.page * fetchOptions.perPage < data.totalHits;\n\n      if (hasNextPage) {\n        refs.loadMoreBtn.classList.remove('visually-hidden');\n        refs.loadMoreBtn.disabled = false;\n\n        refs.loadMoreBtn.addEventListener('click', handleLoadMore);\n      }\n    })\n    .catch(err =>\n      iziToast.show({\n        message: `Sorry, something went wrong.: ${err}`,\n      })\n    )\n    .finally(() => {\n      refs.loader.classList.add('hidden');\n      refs.searchBtn.disabled = false;\n    });\n};\n\nexport const handleLoadMore = () => {\n  refs.loader.classList.remove('hidden');\n  refs.loadMoreBtn.disabled = true;\n\n  fetchOptions.page += 1;\n\n  getImages(fetchOptions)\n    .then(data => {\n      renderGallery(data.hits);\n\n      window.scrollBy({\n        top: scrollConfig.scrollY,\n        behavior: 'smooth',\n      });\n\n      const hasNextPage =\n        fetchOptions.page * fetchOptions.perPage < data.totalHits;\n\n      if (!hasNextPage) {\n        refs.loadMoreBtn.classList.add('visually-hidden');\n\n        refs.loadMoreBtn.removeEventListener('click', handleLoadMore);\n\n        iziToast.show({\n          backgroundColor: '#FFA000',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      }\n    })\n    .catch(err =>\n      iziToast.show({\n        message: `Sorry, something went wrong.: ${err}`,\n      })\n    )\n    .finally(() => {\n      refs.loader.classList.add('hidden');\n      refs.loadMoreBtn.disabled = false;\n    });\n};\n","import { refs } from './js/refs';\nimport { handleImagesSearch } from './js/handlers';\n\nrefs.form.addEventListener('submit', handleImagesSearch);\n\nwindow.addEventListener('scroll', () => {\n  const halfViewport = window.innerHeight / 3;\n\n  if (window.scrollY > halfViewport) {\n    refs.scrollToTopBtn.classList.remove('invisible');\n  } else {\n    refs.scrollToTopBtn.classList.add('invisible');\n  }\n});\n\nrefs.scrollToTopBtn.addEventListener('click', () => {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n});\n"],"names":["refs","isLocalhost","iziToast","API_KEY","BASE_URL","axios","getImages","fetchOptions","params","data","lightbox","SimpleLightbox","renderGallery","images","itemMarkup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","galleryMarkup","image","scrollConfig","SCROLL_MULTIPLIER","handleImagesSearch","e","input","query","card","cardHeight","handleLoadMore","err","halfViewport"],"mappings":"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"}